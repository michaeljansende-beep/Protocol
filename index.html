<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Protokoll Recorder</title>

  <!-- App / Icons (force per-path icons, avoids taking icons from domain root) -->
  <meta name="apple-mobile-web-app-title" content="Protokoll Recorder" />
  <meta name="application-name" content="Protokoll Recorder" />
  <link rel="apple-touch-icon" href="/Protocol/apple-touch-icon-v10.png?v=10" />
  <link rel="icon" type="image/png" sizes="192x192" href="/Protocol/icon-192-v10.png?v=10" />
  <link rel="icon" type="image/png" sizes="512x512" href="/Protocol/icon-512-v10.png?v=10" />
  <link rel="icon" type="image/png" sizes="32x32" href="/Protocol/favicon-32-v10.png?v=10" />
  <link rel="icon" type="image/png" sizes="16x16" href="/Protocol/favicon-16-v10.png?v=10" />
  <link rel="shortcut icon" href="/Protocol/favicon-v10.ico?v=10" />
  <link rel="manifest" href="/Protocol/manifest.webmanifest?v=10" />

  <link rel="stylesheet" href="styles.css?v=10" />

  <!-- PDF -->
  <script defer src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script defer src="pdf.js?v=10"></script>
  <script defer src="app.js?v=10"></script>
</head>

<body>

<header class="topbar">
  <div class="topbar-inner">
    <h1>Protokoll Recorder</h1>
  </div>
</header>

<main class="grid">

  <!-- Gesprächsdaten -->
  <section class="card">
    <h2>Gesprächsdaten</h2>

    <label>Datum & Uhrzeit
      <input id="dateTime" type="datetime-local" />
    </label>

    <label>Ort
      <input id="location" type="text" placeholder="z. B. Karlsruhe" />
    </label>

    <label>Titel (optional)
      <input id="title" type="text" placeholder="Wenn leer: wird automatisch erzeugt" />
    </label>

    <label>Teilnehmer Kunde
      <textarea id="participantsCustomer" rows="3"></textarea>
    </label>

    <label>Teilnehmer Sika / PCI / SCHÖNOX
      <textarea id="participantsInternal" rows="3"></textarea>
    </label>
  </section>

  <!-- Audio -->
  <section class="card">
    <h2>Audio</h2>

    <div class="row">
      <button id="btnRunShortcut" class="rec" type="button">
        Sprachmemo aufnehmen (Kurzbefehl)
      </button>

      <button id="btnPickAudio" class="ghost" type="button">
        Audiodatei auswählen
      </button>

      <button id="btnClearAudio" class="ghost" type="button" disabled>
        Audio löschen
      </button>
    </div>

    <!-- Datei-Auswahl (unsichtbar, wird per Button geöffnet) -->
    <input
      id="fileAudio"
      type="file"
      accept="audio/*,.m4a,.mp3,.wav,.aac,.mp4"
      style="display:none"
    />

    <audio id="player" controls></audio>

    <div class="row">
      <button id="btnTranscribe" type="button" disabled>
        Transkribieren - Notizen
      </button>
    </div>
  </section>

  <!-- Notizen -->
  <section class="card">
    <h2>Notizen</h2>

    <textarea
      id="notes"
      rows="12"
      placeholder="Transkript prüfen und ggf. manuell anpassen …"
    ></textarea>

    <div class="row">
      <button id="btnGenerate">Protokoll erstellen</button>
      <button id="btnReset" class="ghost">Felder leeren</button>
    </div>
  </section>

  <!-- Ergebnis -->
  <section class="card">
    <h2>Ergebnis</h2>

    <textarea id="result" rows="14" readonly></textarea>

    <div class="row">
      <button id="btnCopy" disabled>Text kopieren</button>
      <button id="btnPDF" disabled>PDF erstellen</button>
    </div>
  </section>

</main>

<footer class="footer">
  <div class="env">
    <label for="apiBase">API-URL</label>
    <input id="apiBase" type="url" placeholder="https://…" />
    <button id="btnSaveApi">Speichern</button>
  </div>
</footer>

</body>
</html>
